{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{MapContainer,TileLayer,Marker,Popup,useMap}from'react-leaflet';import L from'leaflet';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Fix for default markers in react-leaflet\ndelete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'});// Custom icons\nconst stationIcon=new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});const resultIcon=new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});// Component to handle map center updates\nconst MapController=_ref=>{let{center,zoom}=_ref;const map=useMap();useEffect(()=>{map.setView(center,zoom);},[map,center,zoom]);return null;};export const MapView=_ref2=>{let{results,selectedStation,selectedResult,onResultClick}=_ref2;const mapRef=useRef(null);// Default to center of Netherlands\nconst defaultCenter=[52.3676,4.9041];const defaultZoom=7;// Calculate map center and zoom based on results and selected station\nconst getMapCenterAndZoom=()=>{if(selectedResult){return{center:[selectedResult.lat,selectedResult.lng],zoom:15};}if(selectedStation){return{center:[selectedStation.lat,selectedStation.lng],zoom:results.length>0?13:11};}return{center:defaultCenter,zoom:defaultZoom};};const{center,zoom}=getMapCenterAndZoom();return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg overflow-hidden h-96\",children:/*#__PURE__*/_jsxs(MapContainer,{ref:mapRef,center:center,zoom:zoom,style:{height:'100%',width:'100%'},className:\"rounded-lg\",children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(MapController,{center:center,zoom:zoom}),selectedStation&&/*#__PURE__*/_jsx(Marker,{position:[selectedStation.lat,selectedStation.lng],icon:stationIcon,children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-ns-blue\",children:selectedStation.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:selectedStation.city}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Train Station\"})]})})}),results.map(result=>/*#__PURE__*/_jsx(Marker,{position:[result.lat,result.lng],icon:resultIcon,eventHandlers:{click:()=>onResultClick(result)},children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-48\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-1\",children:result.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:result.type}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:result.address}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Distance:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[result.distance,\" km\"]})]}),result.rating&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Rating:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"\\u2B50 \",result.rating]})]}),result.openingHours&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Hours:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-green-600\",children:result.openingHours})]})]})]})})},result.id))]})});};","map":{"version":3,"names":["React","useEffect","useRef","MapContainer","TileLayer","Marker","Popup","useMap","L","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","stationIcon","iconSize","iconAnchor","popupAnchor","shadowSize","resultIcon","MapController","_ref","center","zoom","map","setView","MapView","_ref2","results","selectedStation","selectedResult","onResultClick","mapRef","defaultCenter","defaultZoom","getMapCenterAndZoom","lat","lng","length","className","children","ref","style","height","width","attribution","url","position","icon","name","city","result","eventHandlers","click","type","address","distance","rating","openingHours","id"],"sources":["/workspace/src/components/MapView.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport { SearchResult, TrainStation } from '../types';\n\n// Fix for default markers in react-leaflet\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\n// Custom icons\nconst stationIcon = new L.Icon({\n  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41]\n});\n\nconst resultIcon = new L.Icon({\n  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41]\n});\n\ninterface MapViewProps {\n  results: SearchResult[];\n  selectedStation: TrainStation | null;\n  selectedResult: SearchResult | null;\n  onResultClick: (result: SearchResult) => void;\n}\n\n// Component to handle map center updates\nconst MapController: React.FC<{ center: [number, number], zoom: number }> = ({ center, zoom }) => {\n  const map = useMap();\n  \n  useEffect(() => {\n    map.setView(center, zoom);\n  }, [map, center, zoom]);\n  \n  return null;\n};\n\nexport const MapView: React.FC<MapViewProps> = ({\n  results,\n  selectedStation,\n  selectedResult,\n  onResultClick\n}) => {\n  const mapRef = useRef<L.Map>(null);\n\n  // Default to center of Netherlands\n  const defaultCenter: [number, number] = [52.3676, 4.9041];\n  const defaultZoom = 7;\n\n  // Calculate map center and zoom based on results and selected station\n  const getMapCenterAndZoom = (): { center: [number, number], zoom: number } => {\n    if (selectedResult) {\n      return {\n        center: [selectedResult.lat, selectedResult.lng],\n        zoom: 15\n      };\n    }\n    \n    if (selectedStation) {\n      return {\n        center: [selectedStation.lat, selectedStation.lng],\n        zoom: results.length > 0 ? 13 : 11\n      };\n    }\n    \n    return {\n      center: defaultCenter,\n      zoom: defaultZoom\n    };\n  };\n\n  const { center, zoom } = getMapCenterAndZoom();\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg overflow-hidden h-96\">\n      <MapContainer\n        ref={mapRef}\n        center={center}\n        zoom={zoom}\n        style={{ height: '100%', width: '100%' }}\n        className=\"rounded-lg\"\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        <MapController center={center} zoom={zoom} />\n        \n        {/* Train Station Marker */}\n        {selectedStation && (\n          <Marker \n            position={[selectedStation.lat, selectedStation.lng]} \n            icon={stationIcon}\n          >\n            <Popup>\n              <div className=\"text-center\">\n                <h3 className=\"font-semibold text-ns-blue\">{selectedStation.name}</h3>\n                <p className=\"text-sm text-gray-600\">{selectedStation.city}</p>\n                <p className=\"text-xs text-gray-500\">Train Station</p>\n              </div>\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Result Markers */}\n        {results.map((result) => (\n          <Marker\n            key={result.id}\n            position={[result.lat, result.lng]}\n            icon={resultIcon}\n            eventHandlers={{\n              click: () => onResultClick(result)\n            }}\n          >\n            <Popup>\n              <div className=\"min-w-48\">\n                <h3 className=\"font-semibold text-gray-900 mb-1\">{result.name}</h3>\n                <p className=\"text-sm text-gray-600 mb-2\">{result.type}</p>\n                <p className=\"text-xs text-gray-500 mb-2\">{result.address}</p>\n                \n                <div className=\"space-y-1 text-xs\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Distance:</span>\n                    <span className=\"font-medium\">{result.distance} km</span>\n                  </div>\n                  \n                  {result.rating && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-500\">Rating:</span>\n                      <span className=\"font-medium\">⭐ {result.rating}</span>\n                    </div>\n                  )}\n                  \n                  {result.openingHours && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-500\">Hours:</span>\n                      <span className=\"font-medium text-green-600\">{result.openingHours}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n      </MapContainer>\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}